<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.png">

    <title>
        
        React-native &amp; swagger - Thangnh Blog! Blog chia sẻ kiến thức IT và kinh nghiệm cuộc sống
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-34415662-11"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js',  new Date());
      gtag('config',  'UA-34415662-11');
    </script>

</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Practice doesn&#39;t make perfect, only perfect practice makes perfect </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar_pencil.jpg" />
        </div>
        <div class="name">
            <i>HuuThangIT</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> Practice doesn&#39;t make perfect, only perfect practice makes perfect </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        React-native & swagger
    </div>

    <div class="post-meta">
        <span class="attr">Post: <span>2019-04-19 19:54:00</span></span>
        
          <span class="attr">Tags: /
            
            <a class="tag" href="/tags/#react-native &amp; swagger" title="react-native &amp; swagger">react-native &amp; swagger</a>
            <span>/</span>
          
            <a class="tag" href="/tags/#swagger ui" title="swagger ui">swagger ui</a>
            <span>/</span>
          
            <a class="tag" href="/tags/#restfulApi" title="restfulApi">restfulApi</a>
            <span>/</span>
          
        
        </span>
        <!-- <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span> -->
        </span>
    </div>
    <div class="post-content ">
        <p>Giao tiếp mạng sử dụng Swagger trong React native</p>
<p>1. Swagger là gì?</p>
<p>Swagger là một bộ các công cụ mã nguồn mở được dùng để phát triển, thiết kế, xây dựng, và làm tài liệu cho các RESTful API.<br>Có một số phần mềm swagger như:</p>
<ul>
<li>Swagger Editor: dùng để design các API mới hoặc edit các api có sẵn thông qua file spec.</li>
<li>Swagger Codegen: Dùng để sinh code từ file spec có sẵn.</li>
<li>Swagger UI: Dùng để sinh ra code html, js, css.. từ file spec, cung cấp 1 giao diện các apis để người phát triển app và người làm server đều có thể trực tiếp test các api trên đó.</li>
</ul>
<p>2. Ưu điểm của swagger</p>
<p><strong> Phía client:</strong></p>
<ul>
<li>Dễ dàng cập nhật API khi có sự thay đổi API từ phía server, ví dụ: thay đổi tham số, tên api..</li>
<li>Tự động sinh code dựa theo file spec nên việc xây dựng interface kết nối mạng ko còn khó khăn.</li>
</ul>
<p><strong> Phía server:</strong></p>
<ul>
<li>Tự động sinh document</li>
<li>Có thể thiết kế API xong trước rồi mới code.</li>
<li>Dễ dàng chia sẻ tài liệu api cho nhiều người.</li>
</ul>
<p>3. Implement bên client như thế nào?</p>
<ul>
<li>Cài đặt thư viện swagger-client: npm install swagger-client</li>
<li>Sử dụng như thế nào:<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import Swagger from 'swagger-client'</span><br><span class="line">const Swag = <span class="keyword">new</span> Swagger(&#123;</span><br><span class="line"><span class="built_in">  spec,</span></span><br><span class="line"><span class="built_in">  authorizations,</span></span><br><span class="line"><span class="built_in">  requestInterceptor,</span></span><br><span class="line"><span class="built_in">  responseInterceptor,</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>trong đó:</p>
<ul>
<li>spec là file json được tự động sinh ra từ bên phía server. File chứa mô tả các API, mỗi lần bạn muốn cập nhật API, thì chỉ cần thay đổi file này là được.</li>
<li>authorizations: chứa thông tin để xác thực request, được thêm vào trong phần header của mỗi request. Authorization keys được mô tả ở trong phần security của OpenAPI<br><a href="https://swagger.io/docs/specification/authentication/" target="_blank" rel="noopener">https://swagger.io/docs/specification/authentication/</a></li>
<li>requestInterceptor: như là điểm chốt chặn kiểm tra các request, tại đây bạn có thể sửa đổi, log lại request.</li>
<li>responseInterceptor: ngược lại với requestInterceptor, như là điểm chốt chặn của các response.</li>
</ul>
<p>Ví dụ gọi API lấy thông tin của product.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> client = <span class="keyword">await</span> Swagger</span><br><span class="line"><span class="keyword">const</span> resp = <span class="keyword">await</span> client.apis.Product(</span><br><span class="line">  &#123;id: productId&#125;, <span class="comment">// parameters</span></span><br><span class="line">  &#123; requestBody: &#123;&#125;, </span><br><span class="line">    server: <span class="string">"https://api.xxx.jp"</span>&#125;)</span><br><span class="line">  .<span class="keyword">catch</span>(e=&gt;e)</span><br><span class="line"><span class="keyword">if</span> (resp.ok) &#123;</span><br><span class="line">  <span class="comment">// handle response</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ta có thể thêm các tham số khác vào phần parameters với GET request, hoặc với POST, PUT request, ta thêm tham số vào phần requestBody.</p>
<p>4. Đánh giá chung.</p>
<ul>
<li>Hiện tại ngoài js thì swagger client còn hỗ trợ hầu hết các ngôn ngữ khác nên việc phát triển ứng dụng multil-platforms khá thuận tiện.</li>
<li>Việc xây dựng api trở nên dễ dàng, sai sót giữa người làm client và server sẽ được hạn chế tối thiểu.</li>
<li>Thích hợp với các dự án lớn, nhiều người tham gia.</li>
</ul>
<p>japanese</p>
<p>初めまして、タンと申します。ベトナムから参りました。<br>ブログ初投稿です。よろしくお願い致します。</p>
<p>1. <strong><em>自己紹介</em></strong></p>
<p>2015年にハノイ工科大学を卒業してから仕事で日本に来ました。大学生時代にObjective-Cとcocos2dx言語でアプリやゲームを開発したことがあります。<br>入社してWeb関係サービスを開発してRubyOnRailsというのフレームワークを触りました。<br>今ReactNativeでネイティブアプリのクロスクロスプラットフォームを開発しています。</p>
<p>今日はアプリ開発する時APIのコミュニケーションをできるようにSwaggerに関して紹介いたします。</p>
<p>2. <strong><em>Swaggerとは</em></strong></p>
<p>SwaggerとはRESTfulAPIのドキュメントやサーバ、クライアントコード、設計できるツールです。</p>
<p>Swaggerツールの関係性関係性</p>
<ul>
<li>Swagger Editor: 新しいAPIを作成と既存のAPIを編集、定義</li>
<li>Swagger Codegen: specファイルからコードを自動生成</li>
<li>Swagger UI: specファイルからアセットファイル（html, css, js）自動生成</li>
</ul>
<p>3. <strong><em>Swaggerを使うメリット</em></strong></p>
<p><strong>サーバ側</strong></p>
<ul>
<li>APIドキュメントの自動生成ができる</li>
<li>APIモックを簡単に作成できる</li>
<li>クライアントに渡すAPIドキュメントをいちいち手書きすることもなくなるので便利です。</li>
</ul>
<p><strong> クライアント側:</strong></p>
<ul>
<li>APIの変更があればすぐにアップデートできる</li>
<li>ネットワークインターフェイスの作成がいらない</li>
</ul>
<p>4. <strong><em>アプリ側でSwaggerの使い方</em></strong></p>
<ul>
<li>まず swagger-clientをインストール: npm install swagger-client</li>
<li>コードの追加:<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import Swagger from 'swagger-client'</span><br><span class="line">const Swag = <span class="keyword">new</span> Swagger(&#123;</span><br><span class="line"><span class="built_in">  spec,</span></span><br><span class="line"><span class="built_in">  authorizations,</span></span><br><span class="line"><span class="built_in">  requestInterceptor,</span></span><br><span class="line"><span class="built_in">  responseInterceptor,</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>それぞれパラメタの説明:</p>
<ul>
<li>spec:  OpenAPI Specification, 記載ファイル</li>
<li>authorizations: リクエストのHEADに入ってるAuthorizationパラメタです。<br><a href="https://swagger.io/docs/specification/authentication/" target="_blank" rel="noopener">https://swagger.io/docs/specification/authentication/</a></li>
<li>requestInterceptor: ここでリクエストの情報をログできてパラメーターを変更することもできる。</li>
<li>responseInterceptor: ここでリスポンスの情報をログしたり変更することができます。</li>
</ul>
<p>例：作品の情報を取得したい場合</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> client = <span class="keyword">await</span> Swagger</span><br><span class="line"><span class="keyword">const</span> resp = <span class="keyword">await</span> client.apis.Product(</span><br><span class="line">  &#123;id: productId&#125;, <span class="comment">// parameters</span></span><br><span class="line">  &#123; requestBody: &#123;&#125;, </span><br><span class="line">    server: <span class="string">"https://api.xxx.jp"</span>&#125;)</span><br><span class="line">  .<span class="keyword">catch</span>(e=&gt;e)</span><br><span class="line"><span class="keyword">if</span> (resp.ok) &#123;</span><br><span class="line">  <span class="comment">// handle response</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        <div id="comment-container">
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page.url = 'https://blog.huuthangit.com/uncategorized/swagger/';
              this.page.identifier = 'https://blog.huuthangit.com/uncategorized/swagger/';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');
              s.src = 'https://huuthangit.disqus.com/embed.js';
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        </div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        

        
        <li>
            <a target="_blank" href="https://www.facebook.com/huuthangbk">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-facebook"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://github.com/thangnh0409">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/thangnh">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://nguyenuyen.com">nguyenuyen</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        Copyright © 2015-2020 huuthangit</p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<!-- <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->


<script>
    //var gitment = new Gitment({
    //    id: 'React-native & swagger',
    //    owner: '',
    //    repo: '',
    //    oauth: {
    //        client_id: '',
    //        client_secret: '',
    //    },
    //})
    //gitment.render('comment-container')
</script>

</html>
